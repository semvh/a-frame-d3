<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Tweede Kamer</title>
    <meta name="description" content="Een datavisualisatie voor de verkiezingen">

    <!-- A-frame -->
    <!-- <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script> -->

    <!-- D3 -->
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->

    <!-- D3 multi selection -->
    <!-- <script src="https://d3js.org/d3-selection-multi.v1.min.js"></script> -->

    <!-- Local A-frame -->
    <script src="build/js/aframe.min.js"></script>

    <!-- Local D3 -->
    <script src="build/js/d3.min.js"></script>

    <!-- Local D3 multi selection -->
    <script src="build/js/d3-selection-multi.v1.min.js"></script>

    <!-- <script src="https://rawgit.com/oscarmarinmiro/aframe-video-controls/master/dist/aframe-video-controls.min.js"></script> -->

    <style>
        body {
            margin: 0;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>

    <script type="text/javascript">
        // Component to change to random color on click.
        AFRAME.registerComponent('cursor-listener', {
          init: function () {
            var COLORS = ['red', 'green', 'blue'];
            this.el.addEventListener('click', function (evt) {
              var randomIndex = Math.floor(Math.random() * COLORS.length);
              this.setAttribute('material', 'color', COLORS[randomIndex]);
              console.log('I was clicked at: ', evt.detail.intersection.point);
            });
          }
        });

    </script>
</head>

<body>
    <a-scene>
        <!-- Assets are here -->

        <a-assets>
            <img id="woodTexture" src="build/img/wood.jpg">
            <img id="carpetTexture" src="build/img/carpet.jpg">
            <img id="kamer" src="build/img/kamer.jpg">
            <video autoplay="false" muted id="heya" src="build/video/heya.mp4">
        </a-assets>

        <!-- Camera -->

        <a-entity position="0 1.8 -1" rotation="0 -180 0">

            <a-entity camera="" look-controls="" wasd-controls="fly: false; acceleration: 60; easing: 5;">
                <a-entity cursor="fuse: true; fuseTimeout: 1000"
                          position="0 0 -0.1"
                          geometry="primitive: ring"
                          material="color: black; shader: flat">
                <!-- <a-animation begin="click" easing="ease-in" attribute="scale" fill="backwards" from="0.05 0.05 0.05" to="0.06 0.06 0.06"></a-animation> -->
                <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" fill="forwards" from="0.003 0.003 0.003" to="0.004 0.004 0.004"></a-animation>
                </a-entity>
            </a-entity>
        </a-entity>

        <!-- Cursor-listener -->
        <a-entity position="0 0.5 -2" id="box" cursor-listener geometry="primitive: box" material="color: blue"></a-entity>




        <!-- Box (desk) -->
        <a-entity>
            <a-box position="1.24 0.5 0" scale="3 1 1" rotation="0 20 0" color="rgb(171, 114, 16)"></a-box>
            <a-box position="-1.24 0.5 0" scale="3 1 1" rotation="0 -20 0" color="rgb(171, 114, 16)"></a-box>
        </a-entity>

        <!-- Laptop -->
        <a-entity>
            <a-box position="0 1.025 0.4" scale="0.7 0.05 0.5" rotation="0 0 0" color="gray"></a-box>

            <!-- Screen -->
            <!-- <a-box position="0 1.28 0.64" scale="0.65 0.045 0.40" rotation="83.08 179.91 179.91" color="black"></a-box> -->

            <a-entity position="0 1.25 0.65" rotation="9 0 0">

                <a-box  scale="0.7 0.05 0.5" color="gray" rotation="90 0 0"></a-box>
                <a-video src="#heya" width="0.65" height="0.4" position="0 0.025 -0.026"></a-video>

                <!-- <a-entity rotation="0 180 0" position="-0.05 -.75 -0.83" scale="0.4 0.4 0.4">
                    <a-entity video-controls="src:#heya"></a-entity>
                </a-entity> -->

            </a-entity>

            <a-box position="0.300 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.240 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.180 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.120 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.060 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.0 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.060 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.120 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.180 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.240 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.300 1.05 0.50" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>

            <a-box position="0.300 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.240 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.180 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.120 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.060 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.0 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.060 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.120 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.180 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.240 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.300 1.05 0.44" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>

            <a-box position="0.300 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.240 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.180 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.120 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.060 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.0 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.060 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.120 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.180 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.240 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.300 1.05 0.38" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>

            <a-box position="0.300 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.240 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.180 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.120 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.060 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.0 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.060 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.120 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.180 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.240 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.300 1.05 0.32" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>

            <a-box position="0.300 1.05 0.26" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="0.240 1.05 0.26" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>

            <a-box position="0.0875 1.05 0.26" scale="0.23 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>

            <a-box position="-0.060 1.05 0.26" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.120 1.05 0.26" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.180 1.05 0.26" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.240 1.05 0.26" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>
            <a-box position="-0.300 1.05 0.26" scale="0.05 0.01 0.05" rotation="0 0 0" color="#f1f1f1"></a-box>

            <!-- <a-animation begin="mouseenter"  attribute="position" to="0 0 -0.2" direction="alternate" dur="500" repeat="0"></a-animation> -->
        </a-entity>

        <a-entity class="room">
            <a-plane position="0 0 5" height="30" width="40" rotation="-90 0 0" color="#bfd2d0"></a-plane>

            <a-plane position="0 5 20" height="10" width="40" rotation="0 -180 0" color="#8e8e8e"></a-plane>
            <a-plane position="0 5 -10" height="10" width="40" rotation="0 0 0" color="#8e8e8e"></a-plane>

            <a-plane position="20 5 5" height="10" width="30" rotation="0 -90 0" color="#8e8e8e"></a-plane>
            <a-plane position="-20 5 5" height="10" width="30" rotation="0 90 0" color="#8e8e8e"></a-plane>

            <!-- Default lighting injected by A-Frame. -->
            <a-entity light="type: ambient; color: #BBB"></a-entity>
            <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="-3 5 0"></a-entity>
            <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="3 5 0"></a-entity>
        </a-entity>

        <a-sky color="#afafaf"></a-sky>
    </a-scene>


    <script>
        // Load datasheet
        d3.csv("data.csv", function(error, data) {
            // Empty Array that loads the data from the CSV
            var dataAmount = [];

            //
            for(i=0; i<parseInt(data[0].age1825); i++){ dataAmount.push(0); }
            for(i=0; i<parseInt(data[0].age2545); i++){ dataAmount.push(1); }
            for(i=0; i<parseInt(data[0].age4565); i++){ dataAmount.push(2); }
            for(i=0; i<parseInt(data[0].age65plus); i++){ dataAmount.push(3); }


            var scene = d3
                .select("a-scene");

            // Global statics
            var blockX = 0,
                blockCount = 0;

            // Global vars
            var rowHeight = 0.4,
                blockAdd = 1.5,
                radiusBase = 10;
                radiusAdd = 1.5;


            var boxes = scene
                .selectAll("a-box.zetel")
                .data(dataAmount)
                .enter()
                .append("a-box")
                .classed("zetel", true)
                .attrs({ // New attrs
                    position: function(d, i) {
                        var radius = radiusBase;
                        var theta = (blockX / 72) * (2 * Math.PI);


                        blockCount++;


                        // Reset counter after each row;
                        if (blockCount > 5) { blockCount = 0; }

                        // Move one to the side
                        if (blockCount === 0) {
                            blockX += blockAdd;
                        }

                        switch (blockCount) {
                            case 1:
                                radius = radiusBase+radiusAdd;
                                y = rowHeight;
                                break;
                            case 2:
                                radius = radiusBase+(radiusAdd*2);
                                y = rowHeight*2;
                                break;
                            case 3:
                                radius = radiusBase+(radiusAdd*3);
                                y = rowHeight*3;
                                break;
                            case 4:
                                radius = radiusBase+(radiusAdd*4);
                                y = rowHeight*4;
                                break;
                            case 5:
                                radius = radiusBase+(radiusAdd*5);
                                y = rowHeight*5;
                                break;
                            case 0:
                                radius = radiusBase+(radiusAdd*6);
                                y = rowHeight*6;
                                break;
                        }

                        x = radius * Math.cos(theta);
                        z = radius * Math.sin(theta);

                        return x + " " + y + " " + z;
                    },

                    rotation: function(d,i) {
                        var x = 0;
                        var y = 180 * -i/144;
                        var z = 0;

                        return x + " " + y + " " + z
                    },

                    height: function(d, i) {
                        return 1;
                    },

                    color: function(d,i){
                        if (d==0) {
                            return "red";
                        } else if (d==1) {
                            return "blue";
                        } else if (d==2) {
                            return "green";
                        } else if (d==3) {
                            return "orange";
                        }
                    }
                })
        });
    </script>
</body>

</html>
