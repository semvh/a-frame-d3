<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-frame and D3</title>
    <meta name="description" content="A-frame and D3">

    <!-- A-frame -->
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>

    <!-- Fixed D3 -->
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <!-- D3 multi selection -->
    <script src="https://d3js.org/d3-selection-multi.v1.min.js"></script>

    <style>
      body {
        margin: 0;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }
    </style>

  </head>
  <body>
    <a-scene>

      <!-- Camera -->

      <a-entity position="0 1.5 0">
        <a-entity camera="" look-controls="" wasd-controls="">
          <a-cursor color="#FFF"></a-cursor>
        </a-entity>
      </a-entity>

      <!-- Box (not used) -->

      <a-box position="1.5 0 -5" scale="1" color="teal"></a-box>


      <a-sky color="#f1f1f1"></a-sky>
    </a-scene>

    <script>

      d3.csv("data.csv", function(error, data) {

        // fake data
        // var data = [ 10, 20 ]

        console.log(data);

        var hscale = d3.scaleLinear()
            .domain([0, d3.max(data)])
            .range([0,5])

        var scene = d3
            .select("a-scene");

        var boxes = scene
            .selectAll("a-box.bar")
            .data(data)
            .enter()
            .append("a-box")
            .classed("bar", true)

            // New attrs 
            .attrs({

              position: function(d,i) {
                  
                console.log("i: " + i + " " + "d: " + d)

                var x = 0;
                var y = i * 1.2;
                var z = -5;
                return x + " " + y + " " + z;

            },

              height: function(d,i) {
                return 1;

            },

              color: "#e8431f"
        })

      });

    </script>
  </body>
</html>
