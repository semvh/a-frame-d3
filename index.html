<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tweede Kamer</title>
    <meta name="description" content="Een datavisualisatie voor de verkiezingen">

    <script src="build/js/aframe.min.js"></script> <!-- Local A-frame -->
    <script src="build/js/d3.min.js"></script> <!-- Local D3 -->
    <script src="build/js/d3-selection-multi.v1.min.js"></script> <!-- Local D3 multi selection -->

    <style>
        body { margin: 0; position: fixed; top: 0; right: 0; bottom: 0; left: 0; }
    </style>
</head>

<body>
    <a-scene>
        <!-- Assets loader -->
        <a-assets>
            <a-asset-item id="person" src="build/3d-assets/business-woman.obj"></a-asset-item>
        </a-assets>

        <!-- Camera -->
        <a-entity position="0 1.8 -3" rotation="0 -180 0">
            <a-entity camera="" look-controls="" wasd-controls="fly: false; acceleration: 60; easing: 5;">
                <a-cursor color="#FFF"></a-cursor>
            </a-entity>
        </a-entity>

        <a-entity class="person" material="color: #34d493" obj-model="obj: #person"></a-entity>

        <a-plane position="0 0 5" height="30" width="40" rotation="-90 0 0" color="#bfd2d0"></a-plane>

        <a-entity light="type: ambient; color: #BBB"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="-3 5 0"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="3 5 0"></a-entity>

        <a-sky color="#378ead"></a-sky>
    </a-scene>


    <script>
        // Load datasheet
        d3.csv("data.csv", function(error, data) {
            // Empty Array that loads the data from the CSV
            var dataAmount = [];
            for(i=0; i<parseInt(data[0].age1825); i++){ dataAmount.push(0); }
            for(i=0; i<parseInt(data[0].age2545); i++){ dataAmount.push(1); }
            for(i=0; i<parseInt(data[0].age4565); i++){ dataAmount.push(2); }
            for(i=0; i<parseInt(data[0].age65plus); i++){ dataAmount.push(3); }

            var scene = d3.select("a-scene");

            var persons = scene
                .selectAll("a-entity.person")
                .data(dataAmount)
                .enter()
                .append("a-entity")
                .classed("person", true)
                .attrs({ // New attrs
                    position: function(d, i) {
                        x = i*2;
                        y = 1;
                        z = -4;

                        return x + " " + y + " " + z;
                    },

                    "obj-model": function(d, i) {
                        return "obj: #person";
                    }
                })
        });
    </script>
</body>
</html>
